<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚³ãƒ¼ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚²ãƒ¼ãƒ  ğŸŒ½</title>
    <style>
        body { text-align: center; font-family: sans-serif; background: #fff4e0; padding-top: 50px; }
        #counter { font-size: 3rem; color: #d35400; margin: 20px; }
        #click-btn { font-size: 5rem; cursor: pointer; background: none; border: none; transition: transform 0.1s; }
        #click-btn:active { transform: scale(0.9); }
        .stats { margin-top: 30px; }
        button.upgrade { padding: 10px 20px; font-size: 1rem; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ã‚³ãƒ¼ãƒ³ã‚’å¢—ã‚„ã›ï¼ ğŸŒ½</h1>
    <div id="counter">0 ç²’</div>
    <button id="click-btn">ğŸŒ½</button>
    <div class="stats">
        <p>1ã‚¯ãƒªãƒƒã‚¯ã®åç©«é‡: <span id="power">1</span></p>
        <button id="upgrade-btn" class="upgrade">è¾²æ©Ÿå…·ã‚’è²·ã† (ã‚³ã‚¹ãƒˆ: 10)</button>
    </div>

    <script>
        // --- 1. è¨˜æ†¶ã®ãƒ«ãƒ¼ãƒ«ï¼ˆã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ï¼‰ ---
        let score = Number(localStorage.getItem('corn_score')) || 0;
        let clickPower = Number(localStorage.getItem('corn_power')) || 1;
        let upgradeCost = Number(localStorage.getItem('corn_cost')) || 10;
        let autoPower = 1; 

        const scoreDisplay = document.getElementById('counter');
        const powerDisplay = document.getElementById('power');
        const upgradeBtn = document.getElementById('upgrade-btn');

        // ç”»é¢ã‚’é–‹ã„ãŸæ™‚ã«ä¿å­˜ã•ã‚Œã¦ã„ãŸæ•°å­—ã‚’è¡¨ç¤ºã™ã‚‹
        function updateDisplay() {
            scoreDisplay.textContent = score + " ç²’";
            powerDisplay.textContent = clickPower;
            upgradeBtn.textContent = `è¾²æ©Ÿå…·ã‚’è²·ã† (ã‚³ã‚¹ãƒˆ: ${upgradeCost})`;
        }
        updateDisplay();

        // --- 2. ã‚»ãƒ¼ãƒ–ã®ãƒ«ãƒ¼ãƒ«ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã«è¦šãˆã•ã›ã‚‹ï¼‰ ---
        function saveGame() {
            localStorage.setItem('corn_score', score);
            localStorage.setItem('corn_power', clickPower);
            localStorage.setItem('corn_cost', upgradeCost);
        }

        // --- 3. å‹•ãã®ãƒ«ãƒ¼ãƒ« ---
        document.getElementById('click-btn').addEventListener('click', () => {
            score += clickPower;
            updateDisplay();
            saveGame(); // ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãŸã³ã«ã‚»ãƒ¼ãƒ–
        });

        setInterval(() => {
            score += autoPower;
            updateDisplay();
            if (score % 5 === 0) saveGame(); // 5ç²’ã”ã¨ã«ã‚»ãƒ¼ãƒ–
        }, 1000);

        upgradeBtn.addEventListener('click', () => {
            if (score >= upgradeCost) {
                score -= upgradeCost;
                clickPower++;
                upgradeCost = Math.floor(upgradeCost * 1.5);
                updateDisplay();
                saveGame(); // è³¼å…¥ã—ãŸæ™‚ã«ã‚»ãƒ¼ãƒ–
            }
        });

        // ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹ç›´å‰ã«ã‚‚å¿µã®ãŸã‚ã‚»ãƒ¼ãƒ–
        window.onbeforeunload = saveGame;
    </script>
</body>
</html>