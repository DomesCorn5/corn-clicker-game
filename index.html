<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚³ãƒ¼ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚²ãƒ¼ãƒ  ğŸŒ½</title>
    <style>
        body { text-align: center; font-family: sans-serif; background: #fff4e0; padding-top: 50px; }
        #counter { font-size: 3rem; color: #d35400; margin: 20px; }
        #click-btn { font-size: 5rem; cursor: pointer; background: none; border: none; transition: transform 0.1s; }
        #click-btn:active { transform: scale(0.9); }
        .stats { margin-top: 30px; }
        button.upgrade { padding: 10px 20px; font-size: 1rem; cursor: pointer; }
        
        /* --- å®Ÿç¸¾ãƒªã‚¹ãƒˆã®è¦‹ãŸç›® --- */
        #achievements { margin-top: 40px; background: white; padding: 20px; border-radius: 10px; display: inline-block; width: 300px; }
        .achievement-item { color: #ccc; margin: 10px 0; font-weight: bold; }
        .cleared { color: #f1c40f; } /* ã‚¯ãƒªã‚¢ã—ãŸå®Ÿç¸¾ã¯é‡‘è‰²ã«ï¼ */
    </style>
</head>
<body>
    <h1>ã‚³ãƒ¼ãƒ³ã‚’å¢—ã‚„ã›ï¼ ğŸŒ½</h1>
    <div id="counter">0 ç²’</div>
    <button id="click-btn">ğŸŒ½</button>
    <div class="stats">
        <p>1ã‚¯ãƒªãƒƒã‚¯ã®åç©«é‡: <span id="power">1</span></p>
        <button id="upgrade-btn" class="upgrade">è¾²æ©Ÿå…·ã‚’è²·ã† (ã‚³ã‚¹ãƒˆ: 10)</button>
    </div>

    <div id="achievements">
        <h3>å®Ÿç¸¾ãƒªã‚¹ãƒˆ</h3>
        <div id="ach-100" class="achievement-item">ğŸŒ½ å›ã¯ã¨ã†ã‚‚ã‚ã“ã—ãŒå¥½ããªã®ï¼Ÿï¼ˆ100ç²’åç©«ï¼‰</div>
        <div id="ach-1000" class="achievement-item">ğŸŒ½ ã‚³ãƒ¼ãƒ³æˆé‡‘ï¼ï¼ˆ1000ç²’åç©«ï¼‰</div>
        <div id="ach-power5" class="achievement-item">ğŸ’ª åŠ›è‡ªæ…¢ï¼Ÿï¼ˆã‚¯ãƒªãƒƒã‚¯åŠ› 5ä»¥ä¸Šï¼‰</div>
    </div>

    <script>
        // --- 1. è¨˜æ†¶ã®æº–å‚™ ---
        let score = Number(localStorage.getItem('corn_score')) || 0;
        let clickPower = Number(localStorage.getItem('corn_power')) || 1;
        let upgradeCost = Number(localStorage.getItem('corn_cost')) || 10;
        let autoPower = 1; 

        const scoreDisplay = document.getElementById('counter');
        const powerDisplay = document.getElementById('power');
        const upgradeBtn = document.getElementById('upgrade-btn');

        function updateDisplay() {
            scoreDisplay.textContent = score + " ç²’";
            powerDisplay.textContent = clickPower;
            upgradeBtn.textContent = `è¾²æ©Ÿå…·ã‚’è²·ã† (ã‚³ã‚¹ãƒˆ: ${upgradeCost})`;
            checkAchievements(); // è¡¨ç¤ºæ›´æ–°ã®ãŸã³ã«å®Ÿç¸¾ã‚’ãƒã‚§ãƒƒã‚¯ï¼
        }

        // --- 2. å®Ÿç¸¾ã‚’åˆ¤å®šã™ã‚‹ãƒ«ãƒ¼ãƒ«ï¼ˆã©ã‚ã•ã‚“ãŒæ”¹é€ ã™ã‚‹ãªã‚‰ã“ã“ï¼ï¼‰ ---
        function checkAchievements() {
            if (score >= 100) {
                document.getElementById('ach-100').classList.add('cleared');
            }
            if (score >= 1000) {
                document.getElementById('ach-1000').classList.add('cleared');
            }
            if (clickPower >= 5) {
                document.getElementById('ach-power5').classList.add('cleared');
            }
        }

        function saveGame() {
            localStorage.setItem('corn_score', score);
            localStorage.setItem('corn_power', clickPower);
            localStorage.setItem('corn_cost', upgradeCost);
        }

        // --- 3. å‹•ã ---
        document.getElementById('click-btn').addEventListener('click', () => {
            score += clickPower;
            updateDisplay();
            saveGame();
        });

        setInterval(() => {
            score += autoPower;
            updateDisplay();
            if (score % 5 === 0) saveGame();
        }, 1000);

        upgradeBtn.addEventListener('click', () => {
            if (score >= upgradeCost) {
                score -= upgradeCost;
                clickPower++;
                upgradeCost = Math.floor(upgradeCost * 1.5);
                updateDisplay();
                saveGame();
            }
        });

        updateDisplay();
        window.onbeforeunload = saveGame;
    </script>
</body>
</html>